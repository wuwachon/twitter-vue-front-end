{"version":3,"sources":["webpack:///./src/views/Tweet.vue?c822","webpack:///./src/views/Tweet.vue","webpack:///./src/components/TweetDetail.vue","webpack:///src/components/TweetDetail.vue","webpack:///./src/components/TweetDetail.vue?36d2","webpack:///./src/components/TweetDetail.vue?4c97","webpack:///./src/components/ReplyCard.vue","webpack:///src/components/ReplyCard.vue","webpack:///./src/components/ReplyCard.vue?2a43","webpack:///./src/components/ReplyCard.vue?f67b","webpack:///src/views/Tweet.vue","webpack:///./src/views/Tweet.vue?1381","webpack:///./src/views/Tweet.vue?3ae9","webpack:///./src/components/TweetDetail.vue?9af4","webpack:///./src/assets/pictures/prev.png","webpack:///./src/components/ReplyCard.vue?eb87"],"names":["render","_vm","this","_c","_self","staticClass","on","$event","toggleTweetModal","attrs","require","_v","specTweet","toggleReplyModal","_l","replies","reply","key","id","showTweetModal","showReplyModal","afterReplySubmit","staticRenderFns","name","params","tweet","user","_f","avatar","_s","account","description","createdAt","replyCounts","likeCounts","stopPropagation","preventDefault","isLiked","toggleLike","initialSpecTweet","mixins","props","type","required","computed","get","set","methods","console","Toast","icon","title","component","replyUser","tweetUser","comment","initialReply","data","components","SideBar","PopularUsers","TweetModal","ReplyModal","TweetDetail","ReplyCard","created","beforeRouteUpdate","next","module","exports"],"mappings":"kHAAA,W,2FCAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,UAAU,CAACG,GAAG,CAAC,mBAAmB,SAASC,GAAQ,OAAON,EAAIO,kBAAiB,QAAW,GAAGL,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,GAAK,UAAU,CAACN,EAAG,MAAM,CAACE,YAAY,YAAYI,MAAM,CAAC,IAAMC,EAAQ,QAA+B,IAAM,WAAWP,EAAG,KAAK,CAACF,EAAIU,GAAG,SAAS,GAAGR,EAAG,cAAc,CAACM,MAAM,CAAC,qBAAqBR,EAAIW,WAAWN,GAAG,CAAC,mBAAmB,SAASC,GAAQ,OAAON,EAAIY,kBAAiB,IAAO,0BAA0B,SAASN,GAAQN,EAAIW,UAAUL,GAAQ,4BAA4B,SAASA,GAAQN,EAAIW,UAAUL,MAAWN,EAAIa,GAAIb,EAAIc,SAAS,SAASC,GAAO,OAAOb,EAAG,YAAY,CAACc,IAAID,EAAME,GAAGT,MAAM,CAAC,gBAAgBO,SAAY,GAAGb,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,iBAAiB,KAAKA,EAAG,aAAa,CAACM,MAAM,CAAC,KAAOR,EAAIkB,gBAAgBb,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAON,EAAIO,kBAAiB,OAAWL,EAAG,aAAa,CAACM,MAAM,CAAC,qBAAqBR,EAAIW,UAAU,KAAOX,EAAImB,gBAAgBd,GAAG,CAAC,0BAA0B,SAASC,GAAQN,EAAIW,UAAUL,GAAQ,4BAA4B,SAASA,GAAQN,EAAIW,UAAUL,GAAQ,MAAQ,SAASA,GAAQ,OAAON,EAAIY,kBAAiB,IAAQ,qBAAqBZ,EAAIoB,qBAAqB,IAEr3CC,EAAkB,G,4DCFlBtB,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,GAAK,CAAEc,KAAM,OAAQC,OAAQ,CAAEN,GAAIjB,EAAIwB,MAAMC,KAAKR,OAAS,CAACf,EAAG,MAAM,CAACE,YAAY,gBAAgBI,MAAM,CAAC,IAAMR,EAAI0B,GAAG,aAAP1B,CAAqBA,EAAIwB,MAAMC,KAAKE,QAAQ,IAAM3B,EAAIwB,MAAMC,KAAKH,UAAUpB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,GAAK,CAAEc,KAAM,OAAQC,OAAQ,CAAEN,GAAIjB,EAAIwB,MAAMC,KAAKR,OAAS,CAACf,EAAG,IAAI,CAACE,YAAY,aAAa,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAIwB,MAAMC,KAAKH,WAAWpB,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAIU,GAAG,IAAIV,EAAI4B,GAAG5B,EAAIwB,MAAMC,KAAKI,aAAa,IAAI,GAAG3B,EAAG,MAAM,CAACE,YAAY,cAAc,CAACJ,EAAIU,GAAG,IAAIV,EAAI4B,GAAG5B,EAAIwB,MAAMM,aAAa,OAAO5B,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CAACE,YAAY,cAAc,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAI0B,GAAG,uBAAP1B,CAA+BA,EAAIwB,MAAMO,iBAAiB7B,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,OAAO,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAIwB,MAAMQ,aAAa,OAAOhC,EAAIU,GAAG,QAAQR,EAAG,OAAO,CAACE,YAAY,cAAc,CAACF,EAAG,OAAO,CAACE,YAAY,eAAe,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAIwB,MAAMS,eAAejC,EAAIU,GAAG,aAAaR,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyBC,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAO4B,kBAAkB5B,EAAO6B,iBAAwBnC,EAAImB,gBAAe,OAAUjB,EAAG,MAAM,CAACE,YAAY,wBAAwBI,MAAM,CAAC,OAASR,EAAIwB,MAAMY,SAAS/B,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAO4B,kBAAkB5B,EAAO6B,iBAAwBnC,EAAIqC,WAAWrC,EAAIsC,iBAAiBF,QAASpC,EAAIsC,iBAAiBrB,aAE1lDI,EAAkB,G,oCCiDP,GACfC,mBACAiB,uBACAC,OACAF,kBACAG,YACAC,cAGAC,UACAnB,OACAoB,MACA,8BAEAC,OACA,gCAIAC,SACA3B,kBAEA,kCAEA,sBACA,IAEA,MAEA,oCAGA,2BACA,gCAIA,4BAGA,CAEA,kCAGA,2BACA,gCAIA,wBAIA,uCAGA,iCACA,SACA4B,uCACAC,aACAC,aACAC,oCCjHqV,I,wBCQjVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBXpD,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,GAAK,CAAEc,KAAM,OAAQC,OAAQ,CAAEN,GAAIjB,EAAIe,MAAMqC,UAAUnC,OAAS,CAACf,EAAG,MAAM,CAACE,YAAY,gBAAgBI,MAAM,CAAC,IAAMR,EAAI0B,GAAG,aAAP1B,CAAqBA,EAAIe,MAAMqC,UAAUzB,QAAQ,IAAM,kBAAkBzB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,CAACM,MAAM,CAAC,GAAK,CAAEc,KAAM,OAAQC,OAAQ,CAAEN,GAAIjB,EAAIe,MAAMqC,UAAUnC,OAAS,CAACf,EAAG,IAAI,CAACE,YAAY,aAAa,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAIe,MAAMqC,UAAU9B,WAAWpB,EAAG,IAAI,CAACE,YAAY,eAAe,CAACJ,EAAIU,GAAG,KAAKV,EAAI4B,GAAG5B,EAAIe,MAAMqC,UAAUvB,UAAU3B,EAAG,OAAO,CAACF,EAAIU,GAAG,OAAOR,EAAG,OAAO,CAACE,YAAY,cAAc,CAACJ,EAAIU,GAAGV,EAAI4B,GAAG5B,EAAI0B,GAAG,UAAP1B,CAAkBA,EAAIe,MAAMgB,kBAAkB,GAAG7B,EAAG,IAAI,CAACE,YAAY,eAAe,CAACJ,EAAIU,GAAG,QAAQR,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACJ,EAAIU,GAAG,IAAIV,EAAI4B,GAAG5B,EAAIe,MAAMsC,UAAUxB,gBAAgB3B,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiB,CAACJ,EAAIU,GAAG,IAAIV,EAAI4B,GAAG5B,EAAIe,MAAMuC,SAAS,YAAY,IAEzjCjC,EAAkB,GCmCP,GACfC,iBACAiB,uBACAC,OACAe,cACAd,YACAC,cAGAc,OACA,OACAzC,2BChDmV,ICQ/U,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,gCCiCA,GACfO,aACAkC,OACA,OACAtC,kBACAC,kBACAR,WACAM,MACAa,eACAC,aACAN,MACAR,MACAY,WACAP,QACAK,WAEAS,WACAH,aACAD,eAEAlB,aAGA2C,YACAC,eACAC,oBACAC,kBACAC,kBACAC,cACAC,aAEAC,UACA,SAAA/C,GAAA,mBACA,uBACA,sBAEAgD,yBAEA,SAAAhD,GAAA,SACA,uBACA,qBACAiD,KAEApB,SACAvC,oBACA,uBAEAK,oBACA,uBAEA,wBACA,IACA,WAAA4C,SAAA,uBACA,sBACA,2BAEA,SACAvC,EADA,YAEAa,EAFA,UAGAC,EAHA,KAIAN,EAJA,QAKAW,EALA,WAMAH,EANA,YAOAD,GACAwB,EAEA,gBACAvC,KACAa,cACAC,YACAN,OACAW,UACAH,aACAD,eAEA,SACAe,uCACAC,aACAC,aACAC,2BAIA,sBACA,IACA,mCAEA,2BACA,gCAGA,oBACA,SACAH,sCACAC,aACAC,aACAC,yBAIA9B,mBACA,qCAEA,gCC3J+U,ICQ3U,G,UAAY,eACd,EACArB,EACAsB,GACA,EACA,KACA,WACA,OAIa,e,2CCnBf,W,qBCAA8C,EAAOC,QAAU,0U,oCCAjB,W","file":"js/chunk-c6713302.1000c166.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=style&index=0&id=a9fdb126&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('SideBar',{on:{\"show-tweet-modal\":function($event){return _vm.toggleTweetModal(true)}}})],1),_c('div',{staticClass:\"col-7 scrollable-part\"},[_c('div',{staticClass:\"main-title\"},[_c('router-link',{attrs:{\"to\":\"/home\"}},[_c('img',{staticClass:\"prev-icon\",attrs:{\"src\":require('../assets/pictures/prev.png'),\"alt\":\"...\"}})]),_c('h4',[_vm._v(\"推文\")])],1),_c('TweetDetail',{attrs:{\"initial-spec-tweet\":_vm.specTweet},on:{\"show-reply-modal\":function($event){return _vm.toggleReplyModal(true)},\"update:initialSpecTweet\":function($event){_vm.specTweet=$event},\"update:initial-spec-tweet\":function($event){_vm.specTweet=$event}}}),_vm._l((_vm.replies),function(reply){return _c('ReplyCard',{key:reply.id,attrs:{\"initial-reply\":reply}})})],2),_c('div',{staticClass:\"col\"},[_c('PopularUsers')],1)]),_c('TweetModal',{attrs:{\"show\":_vm.showTweetModal},on:{\"close\":function($event){return _vm.toggleTweetModal(false)}}}),_c('ReplyModal',{attrs:{\"initial-spec-tweet\":_vm.specTweet,\"show\":_vm.showReplyModal},on:{\"update:initialSpecTweet\":function($event){_vm.specTweet=$event},\"update:initial-spec-tweet\":function($event){_vm.specTweet=$event},\"close\":function($event){return _vm.toggleReplyModal(false)},\"after-reply-submit\":_vm.afterReplySubmit}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tweet-container\"},[_c('div',{staticClass:\"tweet-header\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.tweet.user.id } }}},[_c('img',{staticClass:\"user-image-sm\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.tweet.user.avatar),\"alt\":_vm.tweet.user.name}})]),_c('div',{staticClass:\"user-naming\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.tweet.user.id } }}},[_c('p',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.tweet.user.name))])]),_c('span',{staticClass:\"user-handle\"},[_vm._v(\"@\"+_vm._s(_vm.tweet.user.account))])],1)],1),_c('div',{staticClass:\"tweet-body\"},[_vm._v(\" \"+_vm._s(_vm.tweet.description)+\" \")]),_c('div',{staticClass:\"tweet-footer\"},[_c('span',{staticClass:\"time-stamp\"},[_vm._v(_vm._s(_vm._f(\"customLongDateFormat\")(_vm.tweet.createdAt)))])]),_c('div',{staticClass:\"counter-section\"},[_c('span',{staticClass:\"reply-count\"},[_c('span',{staticClass:\"reply-number\"},[_vm._v(_vm._s(_vm.tweet.replyCounts)+\" \")]),_vm._v(\"回覆\")]),_c('span',{staticClass:\"like-count\"},[_c('span',{staticClass:\"like-number\"},[_vm._v(_vm._s(_vm.tweet.likeCounts))]),_vm._v(\" 喜歡次數\")])]),_c('div',{staticClass:\"icon-section\"},[_c('div',{staticClass:\"footer-icon reply-icon\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.showReplyModal(true)}}}),_c('div',{staticClass:\"footer-icon like-icon\",attrs:{\"active\":_vm.tweet.isLiked},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.toggleLike(_vm.initialSpecTweet.isLiked, _vm.initialSpecTweet.id)}}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"tweet-container\">\r\n    <div class=\"tweet-header\">\r\n      <router-link :to=\"{ name: 'user', params: { id: tweet.user.id } }\">\r\n        <img\r\n          :src=\"tweet.user.avatar | emptyImage\"\r\n          :alt=\"tweet.user.name\"\r\n          class=\"user-image-sm\"\r\n        />\r\n      </router-link>\r\n      <div class=\"user-naming\">\r\n        <router-link :to=\"{ name: 'user', params: { id: tweet.user.id } }\">\r\n          <p class=\"user-name\">{{ tweet.user.name }}</p>\r\n        </router-link>\r\n        <span class=\"user-handle\">@{{ tweet.user.account }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"tweet-body\">\r\n      {{ tweet.description }}\r\n    </div>\r\n    <div class=\"tweet-footer\">\r\n      <span class=\"time-stamp\">{{\r\n        tweet.createdAt | customLongDateFormat\r\n      }}</span>\r\n    </div>\r\n    <div class=\"counter-section\">\r\n      <span class=\"reply-count\"><span class=\"reply-number\">{{ tweet.replyCounts }} </span>回覆</span>\r\n      <span class=\"like-count\"><span class=\"like-number\">{{ tweet.likeCounts }}</span> 喜歡次數</span>\r\n    </div>\r\n    <div class=\"icon-section\">\r\n      <div\r\n        class=\"footer-icon reply-icon\"\r\n        @click.stop.prevent=\"showReplyModal(true)\"\r\n      ></div>\r\n      <div\r\n        class=\"footer-icon like-icon\"\r\n        :active=\"tweet.isLiked\"\r\n        @click.stop.prevent=\"\r\n          toggleLike(initialSpecTweet.isLiked, initialSpecTweet.id)\r\n        \"\r\n      ></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { emptyImageFilter } from \"../utils/mixins\";\r\nimport { customLongDateFormatter } from \"../utils/mixins\";\r\nimport likesAPI from \"../apis/like\";\r\nimport { Toast } from \"../utils/helpers\";\r\n\r\nexport default {\r\n  name: \"TweetDetail\",\r\n  mixins: [emptyImageFilter, customLongDateFormatter],\r\n  props: {\r\n    initialSpecTweet: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  computed: {\r\n    tweet: {\r\n      get() {\r\n        return this.initialSpecTweet;\r\n      },\r\n      set(value) {\r\n        this.$emit(\"update-tweet\", value);\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    showReplyModal(bool) {\r\n      // 通知 Tweet.vue 要開啟 reply modal\r\n      this.$emit(\"show-reply-modal\", bool);\r\n    },\r\n    async toggleLike(isTweetLiked, tweetId) {\r\n      try {\r\n        // 已經對該 tweet 點過 like\r\n        if (isTweetLiked) {\r\n          // POST /api/tweets/:id/unlike 取消 like\r\n          const response = await likesAPI.unLikeTweet(tweetId);\r\n\r\n          // 錯誤狀態處理\r\n          if (response.data.status === \"error\") {\r\n            throw new Error(response.data.message);\r\n          }\r\n\r\n          // 更新 like 數\r\n          this.tweet.likeCounts--;\r\n\r\n          // 尚未對該 tweet 點過 like\r\n        } else {\r\n          // POST /api/tweets/:id/like 加入 like\r\n          const response = await likesAPI.likeTweet(tweetId);\r\n\r\n          // 錯誤狀態處理\r\n          if (response.data.status === \"error\") {\r\n            throw new Error(response.data.message);\r\n          }\r\n\r\n          // 更新 like 數\r\n          this.tweet.likeCounts++;\r\n        }\r\n\r\n        // 修改該 tweet 的 like 狀態\r\n        this.tweet.isLiked = !this.tweet.isLiked;\r\n\r\n        // 通知 parent view likecount 有改變\r\n        this.$emit(\"after-like-clicked\");\r\n      } catch (error) {\r\n        console.error(error.response.data.message);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: error.response.data.message,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tweet-container {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid var(--page-divider);\r\n}\r\n\r\n/* tweet header: user name, handle and image */\r\n.tweet-header {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding-bottom: 1rem;\r\n}\r\n\r\n.user-image-sm {\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.user-naming {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* tweet body: tweet content */\r\n.tweet-body {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n/* tweet footer: time stamp */\r\n.tweet-footer {\r\n  margin-top: 9px;\r\n  border-bottom: 1px solid var(--page-divider);\r\n}\r\n\r\n.time-stamp {\r\n  font-size: 0.875rem;\r\n  color: var(--secondary-color);\r\n}\r\n\r\n/* below: counter section */\r\n.counter-section {\r\n  color: var(--secondary-color);\r\n  font-size: 1.1875rem;\r\n  font-weight: 600;\r\n  padding: 1rem 0;\r\n  border-bottom: 1px solid var(--page-divider);\r\n  display: flex;\r\n  column-gap: 1.5rem;\r\n}\r\n\r\n/* below: icon section */\r\n.icon-section {\r\n  padding-top: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  column-gap: 3.5rem;\r\n}\r\n\r\n.footer-icon {\r\n  width: 1.875rem;\r\n  height: 1.875rem;\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  cursor: pointer;\r\n}\r\n\r\n/* disable filter setting from basic.css */\r\n.icon-section:hover {\r\n  filter: none;\r\n}\r\n\r\n/* add individual icon filter setting */\r\n.footer-icon:hover {\r\n  filter: brightness(0) saturate(100%) invert(38%) sepia(52%) saturate(2219%)\r\n    hue-rotate(2deg) brightness(107%) contrast(105%);\r\n}\r\n\r\n.reply-number,\r\n.like-number {\r\n  color: var(--dark-100);\r\n}\r\n\r\n.reply-icon {\r\n  background-image: url(\"./../assets/pictures/reply.png\");\r\n}\r\n\r\n.like-icon {\r\n  background-image: url(\"./../assets/pictures/like.png\");\r\n}\r\n\r\n.like-icon[active] {\r\n  background-image: url(\"./../assets/pictures/icon_like.png\");\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TweetDetail.vue?vue&type=template&id=c1b1dc90&scoped=true&\"\nimport script from \"./TweetDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./TweetDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TweetDetail.vue?vue&type=style&index=0&id=c1b1dc90&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c1b1dc90\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card-tweet\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.reply.replyUser.id } }}},[_c('img',{staticClass:\"user-image-sm\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.reply.replyUser.avatar),\"alt\":\"user-image\"}})]),_c('div',{staticClass:\"card-info\"},[_c('div',{staticClass:\"card-header\"},[_c('div',{staticClass:\"user-naming\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: _vm.reply.replyUser.id } }}},[_c('p',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.reply.replyUser.name))])]),_c('p',{staticClass:\"user-handle\"},[_vm._v(\" @\"+_vm._s(_vm.reply.replyUser.account)),_c('span',[_vm._v(\"・\")]),_c('span',{staticClass:\"time-stamp\"},[_vm._v(_vm._s(_vm._f(\"fromNow\")(_vm.reply.createdAt)))])])],1),_c('p',{staticClass:\"user-handle\"},[_vm._v(\" 回覆 \"),_c('span',{staticClass:\"user-name-highlight\"},[_vm._v(\"@\"+_vm._s(_vm.reply.tweetUser.account))])])]),_c('div',{staticClass:\"card-body\"},[_c('p',{staticClass:\"tweet-content\"},[_vm._v(\" \"+_vm._s(_vm.reply.comment)+\" \")])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- Reply card -->\r\n  <div class=\"card-tweet\">\r\n    <router-link :to=\"{ name: 'user', params: { id: reply.replyUser.id } }\">\r\n    <img\r\n      class=\"user-image-sm\"\r\n      :src=\"reply.replyUser.avatar | emptyImage\"\r\n      alt=\"user-image\"\r\n    />\r\n    </router-link>\r\n    <div class=\"card-info\">\r\n      <div class=\"card-header\">\r\n        <div class=\"user-naming\">\r\n          <router-link :to=\"{ name: 'user', params: { id: reply.replyUser.id } }\">\r\n          <p class=\"user-name\">{{ reply.replyUser.name }}</p>\r\n          </router-link>\r\n          <p class=\"user-handle\">\r\n            @{{ reply.replyUser.account }}<span>・</span><span class=\"time-stamp\">{{ reply.createdAt | fromNow }}</span>\r\n          </p>\r\n        </div>\r\n        <p class=\"user-handle\">\r\n          回覆 <span class=\"user-name-highlight\">@{{ reply.tweetUser.account }}</span>\r\n        </p>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <p class=\"tweet-content\">\r\n          {{ reply.comment }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { emptyImageFilter } from \"../utils/mixins\";\r\nimport { fromNowFilter } from \"../utils/mixins\";\r\n\r\nexport default {\r\n  name: \"ReplyCard\",\r\n  mixins: [emptyImageFilter, fromNowFilter],\r\n  props: {\r\n    initialReply: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      reply: this.initialReply\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Reply card */\r\n.card-tweet {\r\n  display: flex;\r\n  border-bottom: 1px solid var(--page-divider);\r\n  padding: 1rem;\r\n}\r\n\r\n.user-image-sm {\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.card-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* card header: user name, handle and creating tweet time */\r\n.card-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  row-gap: 0.5rem;\r\n  width: 100%;\r\n  padding-bottom: 1rem;\r\n}\r\n\r\n.user-naming {\r\n  display: flex;\r\n  column-gap: 0.5rem;\r\n}\r\n\r\n.user-name-highlight {\r\n  color: var(--main-color);\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReplyCard.vue?vue&type=template&id=0443a201&scoped=true&\"\nimport script from \"./ReplyCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ReplyCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ReplyCard.vue?vue&type=style&index=0&id=0443a201&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0443a201\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        <SideBar @show-tweet-modal=\"toggleTweetModal(true)\" />\r\n      </div>\r\n      <div class=\"col-7 scrollable-part\">\r\n        <div class=\"main-title\">\r\n          <router-link to=\"/home\">\r\n            <img\r\n              :src=\"require('../assets/pictures/prev.png')\"\r\n              class=\"prev-icon\"\r\n              alt=\"...\"\r\n            />\r\n          </router-link>\r\n          <h4>推文</h4>\r\n        </div>\r\n        <TweetDetail\r\n          @show-reply-modal=\"toggleReplyModal(true)\"\r\n          :initial-spec-tweet.sync=\"specTweet\"\r\n        />\r\n        <ReplyCard\r\n          v-for=\"reply in replies\"\r\n          :key=\"reply.id\"\r\n          :initial-reply=\"reply\"\r\n        />\r\n      </div>\r\n      <div class=\"col\">\r\n        <PopularUsers />\r\n      </div>\r\n    </div>\r\n    <TweetModal :show=\"showTweetModal\" @close=\"toggleTweetModal(false)\" />\r\n    <ReplyModal\r\n      :initial-spec-tweet.sync=\"specTweet\"\r\n      :show=\"showReplyModal\"\r\n      @close=\"toggleReplyModal(false)\"\r\n      @after-reply-submit=\"afterReplySubmit\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SideBar from \"../components/Sidebar\";\r\nimport PopularUsers from \"../components/PopularUsers\";\r\nimport TweetModal from \"../components/TweetModal\";\r\nimport ReplyModal from \"../components/ReplyModal\";\r\nimport TweetDetail from \"../components/TweetDetail\";\r\nimport ReplyCard from \"../components/ReplyCard\";\r\nimport tweetsAPI from \"../apis/tweet\";\r\nimport repliesAPI from \"../apis/reply\";\r\nimport { Toast } from \"../utils/helpers\";\r\n\r\nexport default {\r\n  name: \"Tweet\",\r\n  data() {\r\n    return {\r\n      showTweetModal: false,\r\n      showReplyModal: false,\r\n      specTweet: {\r\n        id: -1,\r\n        description: \"\",\r\n        createdAt: \"\",\r\n        user: {\r\n          id: -1,\r\n          account: \"\",\r\n          name: \"\",\r\n          avatar: \"\",\r\n        },\r\n        isLiked: false,\r\n        likeCounts: 0,\r\n        replyCounts: 0,\r\n      },\r\n      replies: [],\r\n    };\r\n  },\r\n  components: {\r\n    SideBar,\r\n    PopularUsers,\r\n    TweetModal,\r\n    ReplyModal,\r\n    TweetDetail,\r\n    ReplyCard,\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params;\r\n    this.fetchSpecTweet(id);\r\n    this.fetchReplies(id);\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    // 直接輸入 url 也可取得推文內容\r\n    const { id } = to.params;\r\n    this.fetchSpecTweet(id);\r\n    this.fetchReplies(id);\r\n    next();\r\n  },\r\n  methods: {\r\n    toggleTweetModal(bool) {\r\n      this.showTweetModal = bool;\r\n    },\r\n    toggleReplyModal(bool) {\r\n      this.showReplyModal = bool;\r\n    },\r\n    async fetchSpecTweet(tweetId) {\r\n      try {\r\n        const { data } = await tweetsAPI.getSpecTweet(tweetId);\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        const {\r\n          id,\r\n          description,\r\n          createdAt,\r\n          user,\r\n          isLiked,\r\n          likeCounts,\r\n          replyCounts,\r\n        } = data;\r\n\r\n        this.specTweet = {\r\n          id,\r\n          description,\r\n          createdAt,\r\n          user,\r\n          isLiked,\r\n          likeCounts,\r\n          replyCounts,\r\n        };\r\n      } catch (error) {\r\n        console.error(error.response.data.message);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得推文資料，請再試一次\",\r\n        });\r\n      }\r\n    },\r\n    async fetchReplies(tweetId) {\r\n      try {\r\n        const response = await repliesAPI.getReplies(tweetId);\r\n\r\n        if (response.data.status === \"error\") {\r\n          throw new Error(response.data.message);\r\n        }\r\n\r\n        this.replies = response.data;\r\n      } catch (error) {\r\n        console.error(error.respone.data.message);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得回覆，請再試一次\",\r\n        });\r\n      }\r\n    },\r\n    afterReplySubmit() {\r\n      this.fetchReplies(this.specTweet.id);\r\n      // 收到 ReplyModal.vue 通知後，將回覆數++\r\n      this.specTweet.replyCounts++;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.prev-icon {\r\n  width: 17px;\r\n  height: 14px;\r\n}\r\n\r\n/* 標題文字設定 */\r\n.main-title {\r\n  padding: 1.5rem;\r\n  font-weight: 700;\r\n  border-bottom: 1px solid var(--page-divider);\r\n  display: flex;\r\n  align-items: center;\r\n  column-gap: 1.1875rem;\r\n}\r\n\r\n/* 取消中間區塊的 padding，讓網格線可以接起來 */\r\n.row > * {\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n\r\n/* Scroll bar */\r\n.scrollable-part {\r\n  height: 100vh;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.scrollable-part::-webkit-scrollbar {\r\n  background-color: #fafafa;\r\n  width: 15px;\r\n}\r\n\r\n.scrollable-part::-webkit-scrollbar-thumb {\r\n  background-color: #c1c1c1;\r\n  border-radius: 4px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tweet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tweet.vue?vue&type=template&id=a9fdb126&scoped=true&\"\nimport script from \"./Tweet.vue?vue&type=script&lang=js&\"\nexport * from \"./Tweet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tweet.vue?vue&type=style&index=0&id=a9fdb126&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a9fdb126\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TweetDetail.vue?vue&type=style&index=0&id=c1b1dc90&prod&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyCard.vue?vue&type=style&index=0&id=0443a201&prod&scoped=true&lang=css&\""],"sourceRoot":""}