(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a44e711"],{3141:function(e,s,t){},6183:function(e,s,t){"use strict";t("3141")},"842e":function(e,s,t){},"99c1":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col"},[s("Sidebar")],1),s("div",{staticClass:"col-7"},[s("h4",{staticClass:"main-title"},[e._v("帳戶設定")]),s("AccountSettingForm")],1),s("div",{staticClass:"col"})])])},r=[],o=t("5ea5"),i=function(){var e=this,s=e._self._c;return s("form",{staticClass:"mx-auto w-100",attrs:{action:""},on:{submit:function(s){return s.preventDefault(),s.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form-input d-flex flex-column"},[s("label",{staticClass:"form-input-text",attrs:{for:"account"}},[e._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.account,expression:"user.account"}],class:{error:e.isAccountTooLong},attrs:{type:"text",name:"account",id:"account",placeholder:"請輸入帳號",required:""},domProps:{value:e.user.account},on:{input:[function(s){s.target.composing||e.$set(e.user,"account",s.target.value)},function(s){e.isAccountTooLong=!1}]}}),e.isAccountTooLong?s("span",{staticClass:"error-message mx-3"},[e._v("帳號不可超過 20 字！")]):e._e()]),s("div",{staticClass:"form-input d-flex flex-column"},[s("label",{staticClass:"form-input-text",attrs:{for:"name"}},[e._v("名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],class:{error:e.isNameTooLong},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入使用者名稱",required:""},domProps:{value:e.user.name},on:{input:[function(s){s.target.composing||e.$set(e.user,"name",s.target.value)},function(s){e.isNameTooLong=!1}]}}),e.isNameTooLong?s("span",{staticClass:"error-message mx-3"},[e._v("名稱不可超過 50 字！")]):e._e()]),s("div",{staticClass:"form-input d-flex flex-column"},[s("label",{staticClass:"form-input-text",attrs:{for:"email"}},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"text",name:"email",id:"email",placeholder:"請輸入帳號",required:""},domProps:{value:e.user.email},on:{input:function(s){s.target.composing||e.$set(e.user,"email",s.target.value)}}})]),s("div",{staticClass:"form-input d-flex flex-column"},[s("label",{staticClass:"form-input-text",attrs:{for:"password"}},[e._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",id:"password",placeholder:"請設定密碼",required:""},domProps:{value:e.user.password},on:{input:function(s){s.target.composing||e.$set(e.user,"password",s.target.value)}}}),s("div",{staticClass:"d-flex justify-content-between"})]),s("div",{staticClass:"form-input d-flex flex-column"},[s("label",{staticClass:"form-input-text",attrs:{for:"checkPassword"}},[e._v("密碼確認")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],attrs:{type:"password",name:"checkPassword",id:"checkPassword",placeholder:"請再次輸入密碼",required:""},domProps:{value:e.user.checkPassword},on:{input:function(s){s.target.composing||e.$set(e.user,"checkPassword",s.target.value)}}}),s("div",{staticClass:"d-flex justify-content-between"})]),s("div",{staticClass:"d-flex justify-content-end"},[s("button",{staticClass:"btn-bg btn-border",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" "+e._s(e.isProcessing?"處理中...":"儲存")+" ")])])])},n=[],c=(t("d9e2"),t("2f62")),u=t("2fa3"),l=t("7696"),d={data(){return{user:{account:"",name:"",email:"",password:"",checkPassword:""},isNameTooLong:!1,isAccountTooLong:!1,isProcessing:!1}},created(){this.user=this.currentUser},computed:{...Object(c["b"])(["currentUser"])},methods:{async handleSubmit(){try{if(!this.user.account||!this.user.name||!this.user.email||!this.user.password||!this.user.checkPassword)return void u["a"].fire({icon:"warning",title:"請填寫所有欄位"});if(this.user.password!==this.user.checkPassword)return u["a"].fire({icon:"warning",title:"兩次輸入密碼不同，請重新輸入"}),this.user.password="",void(this.user.checkPassword="");if(this.user.account.length>20)return void(this.isAccountTooLong=!0);if(this.user.name.length>50)return void(this.isNameTooLong=!0);this.isProcessing=!0;const e=await l["a"].editUserData(this.currentUser.id,{account:this.user.account,name:this.user.name,email:this.user.email,password:this.user.password,checkPassword:this.user.checkPassword});if("error"===e.data.status)throw new Error(e.data.message);u["a"].fire({icon:"success",title:"更改成功！"}),this.isProcessing=!1}catch(e){switch(this.isProcessing=!1,console.error(e.response.data.message),e.response.data.message){case"Error: The account has already been used by someone else.":u["a"].fire({icon:"error",title:"account 已重複註冊！"});break;case"Error: The email has already been used by someone else.":u["a"].fire({icon:"error",title:"email 已重複註冊！"});break}}}}},m=d,p=(t("f858"),t("2877")),f=Object(p["a"])(m,i,n,!1,null,"7ade1f6f",null),h=f.exports,v={name:"AccountSetting",components:{Sidebar:o["a"],AccountSettingForm:h}},w=v,g=(t("6183"),Object(p["a"])(w,a,r,!1,null,"2d59b1cb",null));s["default"]=g.exports},f858:function(e,s,t){"use strict";t("842e")}}]);
//# sourceMappingURL=chunk-6a44e711.29f92c5e.js.map