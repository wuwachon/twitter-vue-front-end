{"version":3,"sources":["webpack:///./src/views/AdminLogin.vue","webpack:///src/views/AdminLogin.vue","webpack:///./src/views/AdminLogin.vue?f5a5","webpack:///./src/views/AdminLogin.vue?8cfb","webpack:///./src/views/AdminLogin.vue?6696","webpack:///./src/apis/admin.js"],"names":["render","_vm","this","_c","_self","staticClass","attrs","require","_v","on","$event","preventDefault","stopPropagation","handleSubmit","apply","arguments","directives","name","rawName","value","user","account","expression","modifiers","domProps","target","composing","$set","trim","$forceUpdate","password","isProcessing","_s","staticRenderFns","data","methods","Toast","icon","title","localStorage","console","component","getToken","getItem","adminLogin","apiHelper","post","getAllUsers","get","headers","Authorization","getAllTweets","deleteTweet","tweetId","delete"],"mappings":"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","file":"js/chunk-57177084.43ebf4ac.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"d-flex flex-column mx-auto\",attrs:{\"id\":\"login\"}},[_c('div',{staticClass:\"logo mx-auto mb-4\"},[_c('img',{attrs:{\"src\":require('./../assets/pictures/logo.png'),\"width\":\"50px\"}})]),_c('p',{staticClass:\"menu-text mx-auto mb-4\"},[_vm._v(\"後台登入\")]),_c('form',{staticClass:\"mx-auto w-100\",attrs:{\"action\":\"\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"form-input d-flex flex-column\"},[_c('label',{staticClass:\"form-input-text\",attrs:{\"for\":\"account\"}},[_vm._v(\"帳號\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.user.account),expression:\"user.account\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"name\":\"account\",\"id\":\"account\",\"placeholder\":\"請輸入帳號\",\"required\":\"\"},domProps:{\"value\":(_vm.user.account)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"account\", $event.target.value.trim())},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-input d-flex flex-column\"},[_c('label',{staticClass:\"form-input-text\",attrs:{\"for\":\"password\"}},[_vm._v(\"密碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],attrs:{\"type\":\"password\",\"name\":\"password\",\"id\":\"password\",\"placeholder\":\"請輸入密碼\",\"required\":\"\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.user, \"password\", $event.target.value)}}}),_c('div',{staticClass:\"d-flex justify-content-between\"})]),_c('button',{staticClass:\"btn-bg btn-border w-100\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? \"處理中...\" : \"登入\")+\" \")])]),_c('div',{staticClass:\"text-end\"},[_c('router-link',{staticClass:\"mx-auto text-blue\",attrs:{\"to\":\"/login\"}},[_vm._v(\"前台登入 \")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"login\" class=\"d-flex flex-column mx-auto\">\r\n    <div class=\"logo mx-auto mb-4\">\r\n      <img :src=\"require('./../assets/pictures/logo.png')\" width=\"50px\" />\r\n    </div>\r\n    <p class=\"menu-text mx-auto mb-4\">後台登入</p>\r\n    <form class=\"mx-auto w-100\" action=\"\" @submit.prevent.stop=\"handleSubmit\">\r\n      <div class=\"form-input d-flex flex-column\">\r\n        <label for=\"account\" class=\"form-input-text\">帳號</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"account\"\r\n          id=\"account\"\r\n          v-model.trim=\"user.account\"\r\n          placeholder=\"請輸入帳號\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-input d-flex flex-column\">\r\n        <label for=\"password\" class=\"form-input-text\">密碼</label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          v-model=\"user.password\"\r\n          placeholder=\"請輸入密碼\"\r\n          required\r\n        />\r\n        <div class=\"d-flex justify-content-between\"></div>\r\n      </div>\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn-bg btn-border w-100\"\r\n        :disabled=\"isProcessing\"\r\n      >\r\n        {{ isProcessing ? \"處理中...\" : \"登入\" }}\r\n      </button>\r\n    </form>\r\n    <div class=\"text-end\">\r\n      <router-link to=\"/login\" class=\"mx-auto text-blue\">前台登入 </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"./../utils/helpers\";\r\nimport adminAPI from \"./../apis/admin\";\r\n\r\nexport default {\r\n  name: \"AdminLogin\",\r\n  data() {\r\n    return {\r\n      user: {\r\n        account: \"\",\r\n        password: \"\",\r\n      },\r\n      isProcessing: false,\r\n    };\r\n  },\r\n  methods: {\r\n    async handleSubmit() {\r\n      try {\r\n        if (!this.user.account || !this.user.password) {\r\n          Toast.fire({\r\n            icon: \"warning\",\r\n            title: \"請填寫帳戶、密碼\",\r\n          });\r\n          return;\r\n        }\r\n        this.isProcessing = true;\r\n\r\n        const response = await adminAPI.adminLogin({\r\n          account: this.user.account,\r\n          password: this.user.password,\r\n        });\r\n\r\n        // 取得 API 請求後的資料\r\n        const data = response.data;\r\n\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        // token 存取至 localStorage 內\r\n        localStorage.setItem(\"token\", data.token);\r\n\r\n        Toast.fire({\r\n          icon: \"success\",\r\n          title: \"登入成功\",\r\n        });\r\n\r\n        // 成功登入後轉址\r\n        this.$router.push(\"/admin/tweets\");\r\n      } catch (error) {\r\n        this.isProcessing = false;\r\n        console.error(error.response.data.message);\r\n        switch (error.response.data.message) {\r\n          case \"Error: account not exist\":\r\n            Toast.fire({\r\n              icon: \"error\",\r\n              title: \"帳號不存在！\",\r\n            });\r\n            break;\r\n          case \"Error: Account or Password error!\":\r\n            Toast.fire({\r\n              icon: \"error\",\r\n              title: \"請確認您輸入的帳號、密碼是否正確\",\r\n            });\r\n            this.user.password = \"\";\r\n            break;\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#login {\r\n  width: 540px;\r\n  padding-top: 60px;\r\n}\r\n\r\n.menu-text {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.space {\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n  color: #0062ff;\r\n}\r\n\r\nbutton {\r\n  opacity: 1;\r\n  border-radius: 50px;\r\n  margin-top: 40px;\r\n  margin-bottom: 22px;\r\n  padding: 8px 158px 8px 158px;\r\n  background-color: var(--main-color);\r\n  cursor: pointer;\r\n}\r\n\r\n.form-input:nth-child(2) {\r\n  margin-bottom: 0rem;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminLogin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminLogin.vue?vue&type=template&id=c9243762&scoped=true&\"\nimport script from \"./AdminLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminLogin.vue?vue&type=style&index=0&id=c9243762&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9243762\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminLogin.vue?vue&type=style&index=0&id=c9243762&prod&scoped=true&lang=css&\"","import { apiHelper } from './../utils/helpers'\r\nconst getToken = () => localStorage.getItem('token')\r\n\r\nexport default {\r\n  adminLogin({ account, password }) {\r\n    return apiHelper.post('/admin/signin', {\r\n      account,\r\n      password\r\n    })\r\n  },\r\n  getAllUsers() {\r\n    return apiHelper.get('/admin/users', {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  },\r\n  getAllTweets() {\r\n    return apiHelper.get('/admin/tweets', {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  },\r\n  deleteTweet(tweetId) {\r\n    return apiHelper.delete(`/admin/tweets/${tweetId}`, {\r\n      headers: { Authorization: `Bearer ${getToken()}` }\r\n    })\r\n  }\r\n}"],"sourceRoot":""}