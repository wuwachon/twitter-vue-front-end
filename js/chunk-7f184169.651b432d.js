(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f184169"],{3372:function(t,s,e){},"3a7e":function(t,s,e){"use strict";e("df05")},"3bb6":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-top"},[s("div",{staticClass:"nav-logo"}),s("ul",{staticClass:"nav-list"},[s("li",{staticClass:"nav-item"},[s("router-link",{class:["nav-link",{active:"admin-tweets"===t.inTweetList}],attrs:{to:"/admin/tweets"}},[s("div",{staticClass:"nav-icon home-icon"}),s("span",{staticClass:"nav-title"},[t._v("推文清單")])])],1),s("li",{staticClass:"nav-item"},[s("router-link",{class:["nav-link",{active:"admin-users"===t.inUserList}],attrs:{to:"/admin/users"}},[s("div",{staticClass:"nav-icon person-icon"}),s("span",{staticClass:"nav-title"},[t._v("使用者列表")])])],1)])]),s("div",{staticClass:"nav-bottom"},[s("ul",{staticClass:"nav-list"},[s("li",{staticClass:"nav-item"},[s("div",{staticClass:"nav-link",on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.logout.apply(null,arguments)}}},[s("div",{staticClass:"nav-icon quit-icon"}),s("span",{staticClass:"nav-title"},[t._v("登出")])])])])])])},i=[],n={name:"AdminSidebar",data(){return{inTweetList:"admin-tweets"===this.$route.name,inUserList:"admin-users"===this.$route.name}},methods:{logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},c=n,r=(e("62c3"),e("2877")),o=Object(r["a"])(c,a,i,!1,null,"1a01417e",null);s["a"]=o.exports},"4c87":function(t,s,e){"use strict";e("3372")},"62c3":function(t,s,e){"use strict";e("a0b7")},a0b7:function(t,s,e){},be6c:function(t,s,e){"use strict";var a=e("2fa3");const i=()=>localStorage.getItem("token");s["a"]={adminLogin({account:t,password:s}){return a["b"].post("/admin/signin",{account:t,password:s})},getAllUsers(){return a["b"].get("/admin/users",{headers:{Authorization:"Bearer "+i()}})},getAllTweets(){return a["b"].get("/admin/tweets",{headers:{Authorization:"Bearer "+i()}})},deleteTweet(t){return a["b"].delete("/admin/tweets/"+t,{headers:{Authorization:"Bearer "+i()}})}}},c5a4:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-2"},[s("AdminSidebar")],1),s("div",{staticClass:"col"},[s("AdminTweetList")],1)])])},i=[],n=e("3bb6"),c=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"card-container"},[s("h4",[t._v("推文清單")]),t._l(t.tweets,(function(a){return s("div",{key:a.id,staticClass:"card-tweet"},[s("div",{staticClass:"user-image-sm"}),s("div",{staticClass:"card-info"},[s("div",{staticClass:"card-header"},[s("div",{staticClass:"user-naming"},[s("p",{staticClass:"user-name"},[t._v(t._s(a.user.name))]),s("p",{staticClass:"user-handle"},[t._v(" @"+t._s(a.user.account)),s("span",[t._v("・")]),s("span",{staticClass:"created-at"},[t._v(t._s(t._f("fromNow")(a.createdAt)))])])])]),s("div",{staticClass:"card-body"},[s("p",{staticClass:"tweet-content"},[t._v(" "+t._s(a.description)+" ")])])]),s("button",{staticClass:"delete-tweet",on:{click:function(s){return t.deleteTweet(a.id)}}},[s("img",{staticClass:"card-delete",attrs:{src:e("cf91"),alt:"delete-btn"}})])])}))],2)])},r=[],o=(e("d9e2"),e("2708")),l=e("2fa3"),d=e("be6c"),u={mixins:[o["c"]],name:"AdminTweetList",data(){return{tweets:[]}},created(){this.fetchTweets()},methods:{async fetchTweets(){try{const{data:t}=await d["a"].getAllTweets();this.tweets=t}catch(t){console.error(t.response.data.message)}},async deleteTweet(t){try{const s=await d["a"].deleteTweet(t);if("error"===s.data.status)throw new Error(s.data.message);l["a"].fire({icon:"success",title:"刪除推文成功"}),this.tweets=this.tweets.filter(s=>s.id!==t)}catch(s){console.error(s.response.data.message),l["a"].fire({icon:"success",title:"刪除推文過程發生問題，請再試一次"})}}}},A=u,v=(e("3a7e"),e("2877")),w=Object(v["a"])(A,c,r,!1,null,"edf18a90",null),m=w.exports,f={name:"AdminTweet",components:{AdminSidebar:n["a"],AdminTweetList:m}},C=f,h=(e("4c87"),Object(v["a"])(C,a,i,!1,null,"6ee33107",null));s["default"]=h.exports},cf91:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFTSURBVHgBxdcxTsMwFAZgv3iOVAFVM7K05+kNGm7CEbgB4QYcBVYYgC0MoA5ZI9evqis3je33nFf1H+I6jvw1bvKaKHWlAG7m89UGwDwBqC0APLbtx4u6QE4c3LFYLL9sc3/8NgC1NI5oUZjG9QvcGKNm/kHGmKaqVhsllCGK0bgpy9tf26wHx6/L8u676/7elTB6hLvu/83iP9J4CLW/8YN2HWk8hrbtZ6P9nVJ4CsXPejg4Faego/AUnIoG4Rycg0ZhDs5F92OKkKpa1rbIPJ9PDHXf2yrERMlwDB+dNIFiokvtJ7LsbJQFU3AqiikUM30PJjwaGzsN64xDV68XcoUjwwSUhZOu6th9im3oVos9TCTPOFUccsurnoK6fg6up6K5uJZAc3AthXJxLYlycJBG/cT+1eBSaAo/PFffvNpmJo1iQss++iYhhbrgXK7KuewAr11VftFqOykAAAAASUVORK5CYII="},df05:function(t,s,e){}}]);
//# sourceMappingURL=chunk-7f184169.651b432d.js.map