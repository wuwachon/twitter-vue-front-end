(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6713302"],{"4d3d":function(e,t,s){"use strict";s("5f80")},"5f80":function(e,t,s){},6241:function(e,t,s){},"6f1a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("SideBar",{on:{"show-tweet-modal":function(t){return e.toggleTweetModal(!0)}}})],1),t("div",{staticClass:"col-7 scrollable-part"},[t("div",{staticClass:"main-title"},[t("router-link",{attrs:{to:"/home"}},[t("img",{staticClass:"prev-icon",attrs:{src:s("8bcd"),alt:"..."}})]),t("h4",[e._v("推文")])],1),t("TweetDetail",{attrs:{"initial-spec-tweet":e.specTweet},on:{"show-reply-modal":function(t){return e.toggleReplyModal(!0)},"update:initialSpecTweet":function(t){e.specTweet=t},"update:initial-spec-tweet":function(t){e.specTweet=t}}}),e._l(e.replies,(function(e){return t("ReplyCard",{key:e.id,attrs:{"initial-reply":e}})}))],2),t("div",{staticClass:"col"},[t("PopularUsers")],1)]),t("TweetModal",{attrs:{show:e.showTweetModal},on:{close:function(t){return e.toggleTweetModal(!1)}}}),t("ReplyModal",{attrs:{"initial-spec-tweet":e.specTweet,show:e.showReplyModal},on:{"update:initialSpecTweet":function(t){e.specTweet=t},"update:initial-spec-tweet":function(t){e.specTweet=t},close:function(t){return e.toggleReplyModal(!1)},"after-reply-submit":e.afterReplySubmit}})],1)},i=[],r=(s("d9e2"),s("5ea5")),n=s("f963"),o=s("4287"),l=s("2797"),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tweet-container"},[t("div",{staticClass:"tweet-header"},[t("router-link",{attrs:{to:{name:"user",params:{id:e.tweet.user.id}}}},[t("img",{staticClass:"user-image-sm",attrs:{src:e._f("emptyImage")(e.tweet.user.avatar),alt:e.tweet.user.name}})]),t("div",{staticClass:"user-naming"},[t("router-link",{attrs:{to:{name:"user",params:{id:e.tweet.user.id}}}},[t("p",{staticClass:"user-name"},[e._v(e._s(e.tweet.user.name))])]),t("span",{staticClass:"user-handle"},[e._v("@"+e._s(e.tweet.user.account))])],1)],1),t("div",{staticClass:"tweet-body"},[e._v(" "+e._s(e.tweet.description)+" ")]),t("div",{staticClass:"tweet-footer"},[t("span",{staticClass:"time-stamp"},[e._v(e._s(e._f("customLongDateFormat")(e.tweet.createdAt)))])]),t("div",{staticClass:"counter-section"},[t("span",{staticClass:"reply-count"},[t("span",{staticClass:"reply-number"},[e._v(e._s(e.tweet.replyCounts)+" ")]),e._v("回覆")]),t("span",{staticClass:"like-count"},[t("span",{staticClass:"like-number"},[e._v(e._s(e.tweet.likeCounts))]),e._v(" 喜歡次數")])]),t("div",{staticClass:"icon-section"},[t("div",{staticClass:"footer-icon reply-icon",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.showReplyModal(!0)}}}),t("div",{staticClass:"footer-icon like-icon",attrs:{active:e.tweet.isLiked},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleLike(e.initialSpecTweet.isLiked,e.initialSpecTweet.id)}}})])])},p=[],d=s("2708"),u=s("bdff"),w=s("2fa3"),m={name:"TweetDetail",mixins:[d["b"],d["a"]],props:{initialSpecTweet:{type:Object,required:!0}},computed:{tweet:{get(){return this.initialSpecTweet},set(e){this.$emit("update-tweet",e)}}},methods:{showReplyModal(e){this.$emit("show-reply-modal",e)},async toggleLike(e,t){try{if(e){const e=await u["a"].unLikeTweet(t);if("error"===e.data.status)throw new Error(e.data.message);this.tweet.likeCounts--}else{const e=await u["a"].likeTweet(t);if("error"===e.data.status)throw new Error(e.data.message);this.tweet.likeCounts++}this.tweet.isLiked=!this.tweet.isLiked,this.$emit("after-like-clicked")}catch(s){console.error(s.response.data.message),w["a"].fire({icon:"error",title:s.response.data.message})}}}},h=m,f=(s("8821"),s("2877")),C=Object(f["a"])(h,c,p,!1,null,"c1b1dc90",null),y=C.exports,A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card-tweet"},[t("router-link",{attrs:{to:{name:"user",params:{id:e.reply.replyUser.id}}}},[t("img",{staticClass:"user-image-sm",attrs:{src:e._f("emptyImage")(e.reply.replyUser.avatar),alt:"user-image"}})]),t("div",{staticClass:"card-info"},[t("div",{staticClass:"card-header"},[t("div",{staticClass:"user-naming"},[t("router-link",{attrs:{to:{name:"user",params:{id:e.reply.replyUser.id}}}},[t("p",{staticClass:"user-name"},[e._v(e._s(e.reply.replyUser.name))])]),t("p",{staticClass:"user-handle"},[e._v(" @"+e._s(e.reply.replyUser.account)),t("span",[e._v("・")]),t("span",{staticClass:"time-stamp"},[e._v(e._s(e._f("fromNow")(e.reply.createdAt)))])])],1),t("p",{staticClass:"user-handle"},[e._v(" 回覆 "),t("span",{staticClass:"user-name-highlight"},[e._v("@"+e._s(e.reply.tweetUser.account))])])]),t("div",{staticClass:"card-body"},[t("p",{staticClass:"tweet-content"},[e._v(" "+e._s(e.reply.comment)+" ")])])])],1)},g=[],v={name:"ReplyCard",mixins:[d["b"],d["c"]],props:{initialReply:{type:Object,required:!0}},data(){return{reply:this.initialReply}}},T=v,_=(s("8e9b"),Object(f["a"])(T,A,g,!1,null,"0443a201",null)),k=_.exports,R=s("7482"),b=s("061b"),M={name:"Tweet",data(){return{showTweetModal:!1,showReplyModal:!1,specTweet:{id:-1,description:"",createdAt:"",user:{id:-1,account:"",name:"",avatar:""},isLiked:!1,likeCounts:0,replyCounts:0},replies:[]}},components:{SideBar:r["a"],PopularUsers:n["a"],TweetModal:o["a"],ReplyModal:l["a"],TweetDetail:y,ReplyCard:k},created(){const{id:e}=this.$route.params;this.fetchSpecTweet(e),this.fetchReplies(e)},beforeRouteUpdate(e,t,s){const{id:a}=e.params;this.fetchSpecTweet(a),this.fetchReplies(a),s()},methods:{toggleTweetModal(e){this.showTweetModal=e},toggleReplyModal(e){this.showReplyModal=e},async fetchSpecTweet(e){try{const{data:t}=await R["a"].getSpecTweet(e);if("error"===t.status)throw new Error(t.message);const{id:s,description:a,createdAt:i,user:r,isLiked:n,likeCounts:o,replyCounts:l}=t;this.specTweet={id:s,description:a,createdAt:i,user:r,isLiked:n,likeCounts:o,replyCounts:l}}catch(t){console.error(t.response.data.message),w["a"].fire({icon:"error",title:"無法取得推文資料，請再試一次"})}},async fetchReplies(e){try{const t=await b["a"].getReplies(e);if("error"===t.data.status)throw new Error(t.data.message);this.replies=t.data}catch(t){console.error(t.respone.data.message),w["a"].fire({icon:"error",title:"無法取得回覆，請再試一次"})}},afterReplySubmit(){this.fetchReplies(this.specTweet.id),this.specTweet.replyCounts++}}},S=M,U=(s("4d3d"),Object(f["a"])(S,a,i,!1,null,"a9fdb126",null));t["default"]=U.exports},8821:function(e,t,s){"use strict";s("6241")},"8bcd":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC"},"8e9b":function(e,t,s){"use strict";s("9aea")},"9aea":function(e,t,s){}}]);
//# sourceMappingURL=chunk-c6713302.1000c166.js.map